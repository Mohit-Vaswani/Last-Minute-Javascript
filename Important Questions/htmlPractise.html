<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Javascript</title>
</head>
<body>

<h1>Hello Javascript</h1>


<p class="hello1">Hello 1</p>
<p class="hello1">Hello 2</p>
<p id="hello1">Hello 3</p>
<p id="hello2">Hello 100</p>
<span></span>




<script>

// Place order         - 2
// Cut the fruit       - 2
// add water and ice   - 1
// start the machine   - 1
// select container    - 2
// select toppings     - 3
// serve ice cream     - 2


let stocks = {
    fruits: ["strawberry", "grapes", "banana", "apple"],
    liquid: ["water", "ice"],
    holder: ["cone", "cup", "stick"],
    toppings: ["chocolate", "peanuts"]
}
    
/*
let order = (fruitName, liquidName, holderName, toppingName, call_production) => {
   setTimeout(() => {
       console.log(`${stocks.fruits[fruitName] } was selected`)
       call_production()
   }, 2000)
}
let production = () => {
    setTimeout(() => {
        console.log("Production has started")

        setTimeout(() => {
            console.log("Thr fruits has been chopped")

            setTimeout(() => {
                console.log(`${stocks.liquid[0]} and ${stocks.liquid[1]} was added`)
                
                setTimeout(() => {
                    console.log("The machine has been started")
                    
                    setTimeout(() => {
                        console.log(`${stocks.holder[0]} was selected`)
                        
                        setTimeout(() => {
                            console.log(`${stocks.toppings[1]} was selected`)
                            
                            setTimeout(() => {
                                console.log("Serve Ice Cream")
                            }, 2000)
                        }, 3000)
                    }, 2000)
                }, 1000)
            }, 1000)
        }, 2000)
    }, 0)
}
let serve = () => {}


order(1, stocks.liquid[1], stocks.holder[0], stocks.toppings[1], production)
*/


/*
// Using Promises :

let is_shop_open = true

let order = (time, work) => {
    return new Promise((resolve, reject) => {
        if(is_shop_open) {
            setTimeout(() => {
                resolve(work())
            }, time)
        }
        else {
            reject(console.log("Sorry, our shop is closed"))
        }
    })
}


order(2000, () => console.log(`${stocks.fruits[0]} was selected`))
.then(() => {
    return order(0, () => console.log("Production has started"))
})
.then(() => {
    return order(2000, () => console.log("The fruit has been chopped"))
})
.then(() => {
    return order(1000, () => console.log(`${stocks.liquid[0]} and ${stocks.liquid[1]} was added`))
})
.then(() => {
    return order(1000, () => console.log("The machine has been started"))
})
.then(() => {
    return order(2000, () => console.log(`${stocks.holder[0]} was selected`))
})
.then(() => {
    return order(3000, () => console.log(`${stocks.toppings[1]} was selected`))
})  
.then(() => {
    return order(2000, () => console.log("Serve Ice Cream"))
})
.catch(() => {
    console.log("Customer left")
})

*/

/*
let initiate = true

let b = (time, work) => {
    return new Promise ((resolve, reject) => {
        if(initiate) {
            setTimeout(() => {
                resolve(work())
            }, time)
        }
        else {
            reject(console.log("Error, cannot print"))
        }
    })
}

b(0, ()=>console.log("Hello"))
.then(() => {
    return b(2000, ()=>console.log("World")) 
})
.then(() => {
    return b(0, ()=>console.log("Here I am"))
})
.catch(() => {
    console.log("You cannot print the sentence")
})
.finally(() => {
    console.log("I am done")
})
*/


/*
fetch('https://jsonplaceholder.typicode.com/posts?userId=1')
      .then(res => res.json())
      .then(data => console.log({data}))


try{
  const res = await fetch('https://jsonplaceholder.typicode.com/posts?userId=1', {
    method: 'POST',
    body: JSON.stringify({
      title: 'foo',
      body: 'bar',
      userId: 1
    }),
    headers: {
      'Content-type': 'application/json; charset=UTF-8',
    },
  })
}

*/

/*
const repeat = setInterval(() => {
    console.log("I am Sayan")
}, 1000)

const stop = setTimeout(() => {
    clearInterval(repeat)
    console.log("Stopped !")

}, 5000)
*/


/*
// Call, Bind, Apply :
const a = {
    name: "Sayan",
    age: 20,
}

function func (verb) {
    console.log("My name is =>", this.name, "and age is =>", this.age, "and am =>", verb, "boy")
}


// Call :
Function.prototype.myCall = function (scope, ...args) {
    scope._this = this
    return scope._this(...args)
}

console.log(func.myCall(a, "good"))

// Apply :
Function.prototype.myApply = function (scope, args) {
    scope._this = this
    return scope._this(...args)
}

console.log(func.myApply(a, ["good"]))

// Bind :
Function.prototype.myBind = function (scope, ...args) {
    scope._this = this
    return function () {
        return scope._this(...args)
    }
}

let res = func.myBind(a, "bad")
res()

*/

/*
let arr = [1, 2, 3, 4, 5, 6, 7, 8, 9]
let res = arr.filter(arr => arr %2 === 0)
console.log(res)


let arr2 = [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]

Array.prototype.myFilter = function (cb) {
    let arr = []
    for(let i=0;i<this.length;i++) {
        if(cb(this[i], i, this)) {
            arr.push(this[i])
        }
    }

    return arr
}


let resArr = arr2.myFilter(function (item, index, arr2) {
    return item % 2 === 0;
})
console.log(resArr)

*/



/*
let b = null
let c
console.log(b)
console.log(c)
console.log(a)

*/


/*
let arr = [1, 2, 3, 4, 5, 6, 7, 8, 9]
let res = arr.map(item => item * 2)
console.log(res)

let res2 = arr.filter(item => item * 2)
console.log(res2)
*/

/*
let arr = [1, 2, 3, 4, 5, 6, 7, 8, 9]
let res = arr.map(item => item * 2)
console.log(res)

Array.prototype.myMap = function (cb) {
    let arr = []
    for(let i=0;i<this.length;i++) {
        arr.push(cb(this[i]))
    }

    return arr
}

let resArr = arr.myMap(item => item * 2)
console.log(resArr)
*/















/*
    const a = document.getElementsByClassName("hello1")
    console.log(a)
    
    const b = document.getElementById("hello2")
    console.log(b)
    
    const c = document.getElementsByTagName("p")
    console.log(c)

    const d = document.querySelector(".hello1")
    console.log(d)
    
    const e = document.querySelectorAll(".hello1")
    console.log(e)

    document.querySelector(".hello1").innerHTML = "Hello Everyone, I am Sayan"
    document.querySelector(".hello1").style.color = "red"
    document.querySelector(".hello1").style.backgroundColor = "#333"
    document.querySelector(".hello1").add = "hey"
    document.querySelector(".hello1").remove = "hey"
    
*/













/*
    1. Register
    2. Send Email
    3. Login
    4. Get user data
    5. Display user data
*/

function register(cb) {
    console.log("Application process starts")
    setTimeout(() => {
        console.log("Register end")
        cb()
    }, 2000)
}
function sendEmail(cb) {
    setTimeout(() => {
        console.log("Email end")
        cb()
    }, 5000)
}
function login(cb) {
    setTimeout(() => {
        console.log("Login end")
        cb()
    }, 1000)
}
function getUserData(cb) {
    setTimeout(() => {
        console.log("Got User Data")
        cb()
    }, 3000)
}
function displayUserData() {
    console.log("Displayed User Data")
    console.log("Application process ends")

}

/*
register(function () {
    sendEmail(function () {
        login(function () {
            getUserData(function () {
                displayUserData()
            })
        })
    })

})
*/



/* -------------------------------------------------------------------- */


/*
    1. Register
    2. Send Email
    3. Login
    4. Get user data
    5. Display user data
*/

function register() {
    return new Promise((resolve, reject) => {
        console.log("Application process starts")
        setTimeout(() => {
            console.log("Register end")
            resolve();
        }, 2000)
    })
}
function sendEmail() {
    return new Promise((resolve, reject) => {
        setTimeout(() => {
            console.log("Email end")
            resolve()
        }, 5000)
    })
}
function login() {
    return new Promise ((resolve, reject) => {
        setTimeout(() => {
            console.log("Login end")
            resolve()
        }, 1000)
    })
}
function getUserData() {
    return new Promise ((resolve, reject) => {
        setTimeout(() => {
            return reject("Error in getting user data")
            console.log("Got User Data")
            /*resolve()*/
        }, 3000)
    })
}
function displayUserData() {
    return new Promise ((resolve, reject) => {
        console.log("Displayed User Data")
        console.log("Application process ends")
        resolve()
    })
}

/*
register()
    .then(sendEmail)
    .then(login)
    .then(getUserData)
    .then(displayUserData)
    .catch((err) => {
        console.log(err)
    })
*/



/* -------------------------------------------------------------------- */

/*
async function startProcess() {
    await register()
    await sendEmail()
    await login()
    await getUserData()
    await displayUserData()
}
startProcess()
.catch((err) => {
    console.log(err)
})
*/


/* -------------------------------------------------------------------- */

/*
async function startProcess() {
    try {
        await register()
        await sendEmail()
        await login()
        await getUserData()
        await displayUserData()
    }
    catch(err) {
        console.log(err)
    }
}
startProcess()
*/


/* ------------------------------------------------------------------------ */

/*
function executeRandom(callback) {

    setTimeout(() => {
        console.log("First print this")
        callback()
    }, 3000)
}
*/


/*
executeRandom(function randomNumber () {
    var num = Math.random()
    console.log(num)
})
*/

/*
async function executeRandom() {
    return new Promise ((resolve, reject) => {
        setTimeout(() => {
            return reject("Initially app crashed !!")
            console.log("First print this")
        }, 3000)
    })
}
function randomNumber () {
    var num = Math.random()
    console.log(num)
}


executeRandom()
.catch((err) => {
    console.log(err)
})
.then (randomNumber)

*/










</script>



    
</body>
</html>